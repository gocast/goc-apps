<link rel="import" href="../polymer/polymer-element.html">

<script>
  (function() {

    const apps = [
      {
        "appName": "image",
        "color": "#2196f3",// --paper-blue-500: #2196f3;
        "defaultPlayerStyle": "position: absolute; height: 10%; width: 10%; right: 5%; top: 5%;"
      },
      {
        "appName": "news-marquee",
        "color": "#FF9800", // --paper-orange-500
        "defaultPlayerStyle": "position: absolute; height: 10%; width: 100%; bottom: 0; left: 0",
      },
      {
        "appName": "photos",
        "color": "#7CB342", // --paper-green-500
        "iconName": "album",
        "defaultPlayerStyle": "position: absolute; height: 100%; width: 100%; left: 0; top: 0;",
      },
      {
        "appName": "date-and-time",
        "color": "#E53935", // --paper-red-600
        "defaultPlayerStyle": "position: absolute; height: 10%; width: 10%; right: 5%; top: 5%;"
      }
    ];

    const appsInfo = {
      "en": {
        "image": {
          "displayName": "Image",
          "description": "A single image. Useful for logos and background.",
        },
        "news-marquee": {
          "displayName": "News marquee",
          "description": "Display your latest news on a scrolling text."
        },
        "photos": {
          "displayName": "Photos",
          "description": "Create photo albums."
        },
        "date-and-time": {
          "displayName": "Date & Time",
          "description": "Simple clock analog or digital."
        }
      },
      "es": {
        "image": {
          "displayName": "Imagen",
          "description": "Muestra una sola imagen. Útil para logos y fondos.",
        },
        "news-marquee": {
          "displayName": "Marquesina de noticias",
          "description": "Muestra noticias en movimiento."
        },
        "photos": {
          "displayName": "Fotos",
          "description": "Crea bonitas animaciones con tus fotos."
        },
        "date-and-time": {
          "displayName": "Fecha & Hora",
          "description": "Muestra la fecha o la hora."
        }
      }
    };

    class GocAppsCollection extends Polymer.Element {

      static get is() {return 'goc-apps-collection';}

      static get config() {
        return {
          properties: {

            appName: String,

            item: {
              type: Object,
              notify: true,
              computed: '_computeItem(appName)'
            },

            apps: {
              type: Array,
              notify: true,
              computed: '_computeApps(language)'
            },

            language: {
              type: String,
              value: _ => {
                return 'en';
              }
            }

          }
        };
      }

      find(appName) {
        return this.apps.find(app => {
          return app.appName === appName;
        });
      }

      _computeApps(language) {
        return apps.map(app => {
          const info = appsInfo[language] || appsInfo.en;
          return Object.assign(app, info[app.appName]);
        });
      }

      _computeItem(appName) {
        return this.find(appName);
      }

    }

    customElements.define(GocAppsCollection.is, GocAppsCollection);

  }());
</script>
